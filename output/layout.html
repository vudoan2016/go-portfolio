<!DOCTYPE html>
<html lang="en">
  <h1>{{.Date}}</h1>
  <head>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      function createData(positions) {
        var array = [];
        var header = ["Name", "Weight"];
        array.push(header);

        for (var i = 0; i < positions.length; i++) {
          var row = [];
          row.push(positions[i].Name);
          row.push(positions[i].Weight);
          array.push(row);
        }
        var data = google.visualization.arrayToDataTable(array);
        return data;
      }

      function drawOneChart(title, id, data) {
        var options = {
          title: title
        };

        var chart = new google.visualization.PieChart(
          document.getElementById(id)
        );

        chart.draw(data, options);
      }

      function drawChart() {
        drawOneChart("Components", "preTaxHoldings", createData({{ .Pretaxes.Positions }}));
        drawOneChart("Components", "postTaxHoldings", createData({{ .Posttaxes.Positions }}));
        drawOneChart("Sectors", "preTaxSectors", createData({{ .Pretaxes.Sectors }}));
        drawOneChart("Sectors", "postTaxSectors", createData({{ .Posttaxes.Sectors }}));
      }
    </script>
  </head>
  <body>
    <table>
      <caption>
        <b>Before Tax Holdings</b>
      </caption>
      <tr>
        <th>Name</th>
        <th>Today</th>
        <th>Value</th>
        <th>Weight</th>
        <th>Gain</th>
        <th>Percentage</th>
        <th>Shares</th>
        <th>Purchase Price</th>
        <th>Purchase Date</th>
        <th>Sale Price</th>
        <th>Sale Date</th>
        <th>Forward PE</th>
        <th>Forward EPS</th>
        <th>Trailing Annual Dividend Yield</th>
      </tr>
      {{ range .Pretaxes.Positions}}
      <tr>
        <td>
          <a href="https://finance.yahoo.com/quote/{{.Ticker}}">{{ .Name }}</a>
        </td>
        <td>{{ .Price }}</td>
        <td>{{ .Value }}</td>
        <td>{{ .Weight }}</td>
        {{if lt .Gain 0.0}}
        <td><font color="red">{{.Gain}}</font></td>
        {{else}}
        <td><font color="green">{{.Gain}}</font></td>
        {{end}}
        <td>{{ .Percentage }}</td>
        <td>{{ .Shares }}</td>
        <td>{{ .BuyPrice }}</td>
        <td>{{ .BuyDate }}</td>
        <td>{{ .SalePrice }}</td>
        <td>{{ .SaleDate }}</td>
        <td>{{ .ForwardPE }}</td>
        <td>{{ .ForwardEPS }}</td>
        <td>{{ .TrailingAnnualDividendYield }}</td>
      </tr>
      {{end}}
    </table>

    <table class="columns">
      <tr>
        <td>
          <div id="preTaxHoldings" style="width: 900px; height: 500px;"></div>
        </td>
        <td>
          <div id="preTaxSectors" style="width: 900px; height: 500px;"></div>
        </td>
      </tr>
    </table>

    <b
      >Market value: {{.Pretaxes.Value}} Gain:
      {{.Pretaxes.Gain}}({{.Pretaxes.Percentage}}%) Cash: {{.Pretaxes.Cash}}
    </b>

    <table>
      <caption>
        <b>After Tax Holdings</b>
      </caption>
      <tr>
        <th>Name</th>
        <th>Today</th>
        <th>Value</th>
        <td>Weight</td>
        <th>Gain</th>
        <th>Percentage</th>
        <th>Shares</th>
        <th>Purchase Price</th>
        <th>Purchase Date</th>
        <th>Sale Price</th>
        <th>Sale Date</th>
        <th>Forward PE</th>
        <th>Forward EPS</th>
        <th>Trailing Annual Dividend Yield</th>
      </tr>
      {{ range .Posttaxes.Positions}}
      <tr>
        <td>
          <a href="https://finance.yahoo.com/quote/{{.Ticker}}">{{ .Name }}</a>
        </td>
        <td>{{ .Price }}</td>
        <td>{{ .Value }}</td>
        <td>{{ .Weight }}</td>
        {{if lt .Gain 0.0}}
        <td><font color="red">{{.Gain}}</font></td>
        {{else}}
        <td><font color="green">{{.Gain}}</font></td>
        {{end}}
        <td>{{ .Percentage }}</td>
        <td>{{ .Shares }}</td>
        <td>{{ .BuyPrice }}</td>
        <td>{{ .BuyDate }}</td>
        <td>{{ .SalePrice }}</td>
        <td>{{ .SaleDate }}</td>
        <td>{{ .ForwardPE }}</td>
        <td>{{ .ForwardEPS }}</td>
        <td>{{ .TrailingAnnualDividendYield }}</td>
      </tr>
      {{ end}}
    </table>

    <table class="columns">
      <tr>
        <td>
          <div id="postTaxHoldings" style="width: 900px; height: 500px;"></div>
        </td>
        <td>
          <div id="postTaxSectors" style="width: 900px; height: 500px;"></div>
        </td>
      </tr>
    </table>

    <b
      >Market value: {{.Posttaxes.Value}} Gain:
      {{.Posttaxes.Gain}}({{.Posttaxes.Percentage}}%) Cash: {{.Posttaxes.Cash}}
    </b>
  </body>
</html>
